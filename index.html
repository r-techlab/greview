<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Links</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #f9fafb;
            --card-bg: #f0f4ff;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            line-height: 1.5;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 400px;
            overflow: hidden;
            position: relative;
            transition: var(--transition);
            border: 1px solid var(--border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .card-body {
            padding: 32px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 24px;
            text-align: center;
        }

        .social-links {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 10px;
        }

        .social-link {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            transition: var(--transition);
            text-decoration: none;
            padding: 16px;
        }

        .social-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        .social-link svg {
            width: 28px;
            height: 28px;
            margin-bottom: 8px;
        }

        .social-link span {
            font-size: 12px;
            font-weight: 500;
            text-transform: capitalize;
        }

        .loading {
            padding: 40px;
            text-align: center;
            color: var(--primary);
            font-weight: 500;
        }

        .loading:after {
            content: '...';
            animation: dots 1.5s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        @media (max-width: 480px) {
            .card {
                border-radius: 12px;
            }
            
            .card-body {
                padding: 24px;
            }
            
            .social-links {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animated {
            animation: fadeIn 0.6s ease-out forwards;
        }
    </style>
</head>
<body>
    <div class="card">
        <div id="loading" class="loading">Loading social links</div>
        
        <div id="social-container" style="display: none;">
            <div class="card-body">
                <h3 class="section-title">Connect</h3>
                <div id="social-links" class="social-links">
                    <!-- Social links will be inserted here by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Google Sheets ID and API key
        const SHEET_ID = '1wAPgSKnAFwBDYe8eRHL_pgluEcIk1mJXc79l_Istt6Y';
        const API_KEY = 'AIzaSyByyiuwuJBysKl2xtvl6wCw6Gz9shyDzXs';
        const SHEET_NAME = 'SocialMediaCard';

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const contactId = urlParams.get('id') || '111';
            
            const loadingElement = document.getElementById('loading');
            const socialContainer = document.getElementById('social-container');

            if (!contactId) {
                loadingElement.textContent = 'Error: No contact ID provided. Add ?id=YOUR_ID to the URL.';
                return;
            }

            fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${SHEET_NAME}?key=${API_KEY}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Network error: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    const rows = data.values;
                    if (rows && rows.length > 0) {
                        const headers = rows[0].map(header => header.toLowerCase().trim());
                        const idColumnIndex = headers.indexOf('id');

                        if (idColumnIndex === -1) {
                            loadingElement.textContent = "Error: 'Id' column not found in the sheet.";
                            return;
                        }

                        let foundProfileData = null;
                        for (let i = 1; i < rows.length; i++) {
                            const currentRow = rows[i];
                            if (currentRow.length > idColumnIndex && currentRow[idColumnIndex] && currentRow[idColumnIndex].trim().toLowerCase() === contactId.trim().toLowerCase()) {
                                foundProfileData = currentRow;
                                break;
                            }
                        }

                        if (foundProfileData) {
                            loadingElement.style.display = 'none';
                            socialContainer.style.display = 'block';
                            socialContainer.classList.add('animated');

                            const profile = {};
                            headers.forEach((header, index) => {
                                const normalizedHeader = header;
                                profile[normalizedHeader] = index < foundProfileData.length ? foundProfileData[index] : '';
                            });
                            
                            populateSocialLinks(profile);
                        } else {
                            loadingElement.textContent = `Contact with ID '${contactId}' not found.`;
                        }
                    } else {
                        loadingElement.textContent = 'No data found in the sheet.';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    loadingElement.textContent = 'Error loading social links: ' + error.message;
                });
        });
        
        function populateSocialLinks(data) {
            const socialLinksContainer = document.getElementById('social-links');
            socialLinksContainer.innerHTML = ''; 
            
            const socialPlatformsMap = {
                'linkedin': ['linkedin', 'linkedinurl', 'linkedin url', 'linkedin_url'],
                'whatsapp': ['whatsapp', 'whatsappurl', 'whatsapp url', 'whatsapp_url'],
                'instagram': ['instagram', 'instagramurl', 'instagram url', 'instagram_url'],
                'facebook': ['facebook', 'facebookurl', 'facebook url', 'facebook_url'],
				'google': ['google', 'googleurl', 'google url', 'google_url'],
                'twitter': ['twitter', 'twitterurl', 'twitter url', 'twitter_url'],
                'github': ['github', 'githuburl', 'github url', 'github_url']
            };
            
            let socialLinksFound = 0;
            for (const [platform, variations] of Object.entries(socialPlatformsMap)) {
                let socialUrl = null;
                
                for (const variant of variations) {
                    if (data[variant] && String(data[variant]).trim() !== '') {
                        socialUrl = String(data[variant]).trim();
                        break;
                    }
                }
                
                if (socialUrl) {
                    socialLinksFound++;
                    if (!socialUrl.startsWith('http://') && !socialUrl.startsWith('https://') && !socialUrl.startsWith('mailto:') && !socialUrl.startsWith('tel:')) {
                        if (platform === 'whatsapp' && /^\d+$/.test(socialUrl.replace(/\D/g,''))) {
                            socialUrl = `https://wa.me/${socialUrl.replace(/\D/g,'')}`;
                        } else {
                            socialUrl = 'https://' + socialUrl;
                        }
                    }
                    
                    const link = document.createElement('a');
                    link.href = socialUrl;
                    link.target = '_blank';
                    link.rel = 'noopener noreferrer';
                    link.title = platform.charAt(0).toUpperCase() + platform.slice(1);
                    link.className = 'social-link';
                    link.setAttribute('aria-label', platform);
                    
                    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svg.setAttribute('viewBox', '0 0 24 24');
                    svg.setAttribute('fill', 'none');
                    svg.setAttribute('stroke', 'currentColor');
                    svg.setAttribute('stroke-width', '2');
                    
                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', getSocialIconPath(platform));
                    svg.appendChild(path);
                    
                    const platformName = document.createElement('span');
                    platformName.textContent = platform;
                    
                    link.appendChild(svg);
                    link.appendChild(platformName);
                    socialLinksContainer.appendChild(link);
                }
            }
            
            if (socialLinksFound === 0) {
                const noSocialMsg = document.createElement('p');
                noSocialMsg.textContent = 'No social links provided';
                noSocialMsg.style.color = 'var(--text-light)';
                noSocialMsg.style.fontSize = '14px';
                noSocialMsg.style.textAlign = 'center';
                noSocialMsg.style.width = '100%';
                noSocialMsg.style.gridColumn = '1 / -1';
                socialLinksContainer.appendChild(noSocialMsg);
            }
        }
        
        function getSocialIconPath(platform) {
            const icons = {
				linkedin: 'M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z M2 9h4v12H2z M6 4a2 2 0 1 1 0 4 2 2 0 0 1 0-4z',
				whatsapp: 'M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z',
				instagram: 'M12 2c2.717 0 3.056.01 4.122.06 1.065.05 1.79.217 2.428.465.66.254 1.216.598 1.772 1.153a4.908 4.908 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428.047 1.066.06 1.405.06 4.122 0 2.717-.01 3.056-.06 4.122-.05 1.065-.218 1.79-.465 2.428a4.883 4.883 0 0 1-1.153 1.772 4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.428.465-1.066.047-1.405.06-4.122.06-2.717 0-3.056-.01-4.122-.06-1.065-.05-1.79-.218-2.428-.465a4.89 4.89 0 0 1-1.772-1.153 4.904 4.904 0 0 1-1.153-1.772c-.248-.637-.415-1.363-.465-2.428C2.013 15.056 2 14.717 2 12c0-2.717.01-3.056.06-4.122.05-1.066.217-1.79.465-2.428a4.88 4.88 0 0 1 1.153-1.772A4.897 4.897 0 0 1 5.45 2.525c.638-.248 1.362-.415 2.428-.465C8.944 2.013 9.283 2 12 2zm0 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.25a1.25 1.25 0 0 0-2.5 0 1.25 1.25 0 0 0 2.5 0zM12 9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z',
				facebook: 'M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z',
				twitter: 'M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z',
				github: 'M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22',
				google: 'M21.35 11.1H12v2.9h5.35c-.25 1.4-1.6 4.1-5.35 4.1A6.25 6.25 0 1 1 17.3 7.7l2.1-2.1A9.5 9.5 0 1 0 21.5 16c.4-.7.7-1.6.85-2.6.05-.3.05-.6.05-.9 0-.5-.05-.9-.15-1.4z'
			};

            return icons[platform] || '';
        }
    </script>
</body>
</html>
